{% extends 'base.html' %}
{% block content %}

<h2>
    Scans &nbsp;
    <img id="loader" src="static/img/loader.gif" alt="Loading...">
</h2>
  
<div id="scancontent">

{% if newscan %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    <h4 class="alert-heading">Success!</h4>
    Scan '{{ newscan }}' has successfully been initiated. Reload this page for up-to-date status on the scan.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

{% if rerunscans %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    <h4 class="alert-heading">Success!</h4>
    Scans have successfully been re-initiated as separate instances. Reload this page for up-to-date status on the scans.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

{% if stoppedscan and errors|length == 0 %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    <h4 class="alert-heading">Scan aborted.</h4>
    Please allow a minute or two for the scan to cleanly shut itself down.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

{% if stoppedscan and errors|length > 0 %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    <h4 class="alert-heading">Error</h4>
    Some or all of the scans could not be aborted:<br>
    <ul class="mb-0">
        {% for err in errors %}
        <li>{{ err }}</li>
        {% endfor %}
    </ul>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

<script type='text/javascript' src="static/js/spiderfoot.scanlist.js"></script>
</div>

<iframe class='hidden' id='exportframe'></iframe>

{% endblock %}
